<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="UTF-8">
        <title>資産形成シミュレーション</title>
        <link rel="stylesheet" th:href="@{/home2.css}">
    </head>
    <body>
        <div class="container">
            <div class="head">
                <h1>資産形成シミュレーション</h1>
            </div>
            <form action="/add">
                <div class="formContainer">
                    <table>
                        <tr>
                            <th><label>期待収益率(%)</label></th>
                            <td><input name="expectedRateOfReturn" class="margin-right" type="text" /></td>
                            <th><label>ボラティリティ(%)</label></th>
                            <td><input name="volatility" type="text" /></td>
                        </tr>
                        <tr>
                            <th><label>シミュレーション開始年齢</label></th>
                            <td><input name="startAge" class="margin-right" type="text" /></td>
                            <th><label>つみたて月額(万)</label></th>
                            <td><input name="monthlySavings" type="text" /></td>
                        </tr>
                        <tr>
                            <th><label>つみたて額初期値(万)</label></th>
                            <td><input name="initialValue" type="text" /></td>
                            <th></th>
                            <td></td>
                        </tr>
                    </table>
                </div>
                <div>
                    <input type="submit" class="button" value="開始" />
                </div>
            </form>

            <div class="paramList">
                 <table>
                      <thead>
                          <tr>
                              <th class="hidden">ID</th>
                              <th>期待収益率</th>
                              <th>ボラティリティ</th>
                              <th>シミュレーション開始年齢</th>
                              <th>つみたて月額</th>
                              <th>つみたて額初期値</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr th:each="params : ${params}">
                              <td class="hidden" th:text="${params.id}"></td>
                              <td th:text="${params.expectedRateOfReturn} + '%'"></td>
                              <td th:text="${params.volatility} + '%'"></td>
                              <td th:text="${params.startAge} + '歳'"></td>
                              <td th:text="${params.monthlySavings} + '万'"></td>
                              <td th:text="${params.initialValue} + '万'"></td>
                          </tr>
                      </tbody>
                  </table>
            </div>

            <div  class="chartContainer">
                <canvas id="myLineChart"></canvas>
            </div>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.js"></script>
        <script th:inline="javascript">
              var ctx = document.getElementById("myLineChart");
              var myLineChart = new Chart(ctx, {
                type: 'line',
                data: {
<!--                  labels: ['2023年', '2024年', '2025年', '2026年', '2027年', '2028年'],-->
                  labels: /*[[${monthCountList}]]*/"monthCountList",
                  datasets: [
<!--                    {-->
<!--                      label: '上位5%',-->
<!--                      data: [28.243, 37.117, 40.792, 46.496, 51.731, 54.078],-->
<!--                      borderColor: "rgba(255,0,0,1)",-->
<!--                      backgroundColor: "rgba(0,0,0,0)"-->
<!--                    },-->
                    {
                      label: '予想平均',
                      data: /*[[${valuationData}]]*/"valuationData",
<!--                      data: [22.674, 22.982, 22.884, 22.985, 22.998, 22.820],-->
                      borderColor: "rgba(0,255,0,1)",
                      backgroundColor: "rgba(0,0,0,0)"
                    }
<!--                    {-->
<!--                      label: '下位5%',-->
<!--                      data: [17.814, 13.038, 10.112, 9.082, 7.955, 6.984],-->
<!--                      borderColor: "rgba(0,0,255,1)",-->
<!--                      backgroundColor: "rgba(0,0,0,0)"-->
<!--                    }-->
                  ],
                },
                options: {
                  title: {
                    display: true,
                    text: '基準価格推移'
                  },
                  scales: {
                    yAxes: [{
                      ticks: {
                        suggestedMax: /*[[${suggestedMax}]]*/"suggestedMax",
                        suggestedMin: 0,
                        stepSize: /*[[${stepSize}]]*/"stepSize",
                        callback: function(value, index, values){
                          return  value +  '万円'
                        }
                      }
                    }]
                  },
                }
              });

<!--          var ctx = document.getElementById("myLineChart");-->
<!--          var myLineChart = new Chart(ctx, {-->
<!--            type: 'line',-->
<!--            data: {-->
<!--              labels: ['8月1日', '8月2日', '8月3日', '8月4日', '8月5日', '8月6日', '8月7日'],-->
<!--              datasets: [-->
<!--                {-->
<!--                  label: '最高気温(度）',-->
<!--                  data: [35, 34, 37, 35, 34, 35, 34, 25],-->
<!--                  borderColor: "rgba(255,0,0,1)",-->
<!--                  backgroundColor: "rgba(0,0,0,0)"-->
<!--                },-->
<!--                {-->
<!--                  label: '最低気温(度）',-->
<!--                  data: [25, 27, 27, 25, 26, 27, 25, 21],-->
<!--                  borderColor: "rgba(0,0,255,1)",-->
<!--                  backgroundColor: "rgba(0,0,0,0)"-->
<!--                }-->
<!--              ],-->
<!--            },-->
<!--            options: {-->
<!--              title: {-->
<!--                display: true,-->
<!--                text: '気温（8月1日~8月7日）'-->
<!--              },-->
<!--              scales: {-->
<!--                yAxes: [{-->
<!--                  ticks: {-->
<!--                    suggestedMax: 40,-->
<!--                    suggestedMin: 0,-->
<!--                    stepSize: 10,-->
<!--                    callback: function(value, index, values){-->
<!--                      return  value +  '度'-->
<!--                    }-->
<!--                  }-->
<!--                }]-->
<!--              },-->
<!--            }-->
<!--          });-->
        </script>
    </body>
</html>